<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="css_invoice_format" model="report.paperformat">
        <field name="name">Tax Invoice</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">15</field>
        <field name="margin_bottom">10</field>
        <field name="margin_left">5</field>
        <field name="margin_right">5</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">16</field>
        <field name="dpi">90</field>
    </record>
    <record id="css_pdf_report_ebill_ship_to" model="ir.actions.report">
        <field name="name">TAX INVOICE (Ship to)</field>
        <field name="model">account.move</field>
        <field name="report_type">qweb-html</field>
        <field name="report_name">csspl_india.tax_invoice_report_ship_to</field>
        <field name="report_file">csspl_india.tax_invoice_report_ship_to</field>
        <field name="print_report_name">(object._get_report_base_filename())</field>
        <field name="binding_model_id" ref="account.model_account_move"/>
        <field name="paperformat_id" ref="csspl_india.css_invoice_format"/>
        <field name="binding_type">report</field>
    </record>


    <template id="tax_invoice_report_ship_to">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="csspl_india.css_invoice_report_header">
                    <style>
                        .header_text{
                        font-size: 14px;
                        }
                        .content_text{
                        font-size: 13px;
                        }
                        .center_text{
                        text-align: center;
                        }
                    </style>
                    <div class="page">
                        <table style="width:100%">
                            <tr>
                                <center colspan="3">
                                    <t t-if="doc.move_type == 'out_refund'">
                                        <span style="font-size: 150%;">Bill of Supply</span>
                                    </t>
                                    <t t-else="">
                                        <span style="font-size: 150%;">Bill of Supply</span>
                                    </t>
                                </center>
                            </tr>
                        </table>

                        <table style="border-collapse: collapse; width: 100%">
                            <tr>
                                <td style="padding:5px;border: 1px solid;vertical-align: top;" colspan="4">
                                    <span class="header_text">
                                        <b>IRN:</b>
                                    </span>
                                    <t t-if="doc.transaction_id.name">
                                        <span t-esc="doc.transaction_id.name[0:40]"/>
                                        <br/>
                                        <span t-esc="doc.transaction_id.name[40:]"/>
                                    </t>
                                    <br/>
                                    <span class="header_text">
                                        <b>Ack No.:</b>
                                    </span>
                                    <span t-esc="doc.transaction_id.ack_no"/>
                                    <br/>
                                    <span class="header_text">
                                        <b>Ack Date:</b>
                                    </span>
                                    <span t-esc="doc.transaction_id.ack_date"/>
                                    <br/>
                                    <!--                                   <t t-if="doc.po_no">-->
                                    <!--                                  <span class="header_text"><b>Buyer Order No :</b></span>-->
                                    <!--                                  <span t-esc="doc.po_no"/><br/>-->
                                    <!--                                  <span class="header_text"><b>Date :</b></span>-->
                                    <!--                                  <span t-esc="doc.po_date"/>-->
                                    <!--                                    </t>-->
                                </td>
                                <td style="padding:5px;border: 1px solid;" colspan="4">
                                    <t t-if="doc.transaction_id.qr_code">
                                        <img t-att-src="'/report/barcode/?barcode_type=%s&amp;value=%s&amp;width=%s&amp;height=%s' %                 ('QR', doc.transaction_id.qr_code, 200, 200)"/>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid;" colspan="2">
                                    <t t-if="doc.move_type == 'out_refund'">
                                        <strong style="padding: 5px" class="header_text">Credit No:</strong>
                                    </t>
                                    <t t-else="">
                                        <strong style="padding: 5px" class="header_text">Invoice No:</strong>
                                    </t>
                                    <br/>
                                    <span t-esc="doc.name" class="content_text" style="padding: 5px"/>

                                </td>
                                <td style="border: 1px solid;" colspan="2">
                                    <t t-if="doc.move_type == 'out_refund'">
                                        <strong style="padding: 5px" class="header_text">Credit Date:</strong>
                                    </t>
                                    <t t-else="">
                                        <strong style="padding: 5px" class="header_text">Invoice Date:</strong>
                                    </t>
                                    <br/>
                                    <span t-esc="doc.invoice_date" t-options="{'widget': 'date'}" class="content_text"
                                          style="padding: 5px"/>

                                </td>
                                <!--                                <td style="border: 1px solid; vertical-align: text-top;" colspan="4" rowspan="2">-->
                                <!--                                  <b><span>Dispatch Add</span> </b><br/>-->
                                <!--                                  <span t-esc="doc.partner_shipping_id.street"/>-->
                                <!--                                  <span t-esc="doc.partner_shipping_id.street2"/>-->
                                <!--                                  <span t-esc="doc.partner_shipping_id.city"/> <span t-esc="doc.partner_shipping_id.state_id.name"/>-->
                                <!--                                </td>-->
                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">
                                    <strong style="padding: 5px" class="header_text">Buyer Order No:</strong>
                                    <br/>
                                    <span style="padding: 5px" t-esc="doc.po_no" class="content_text"/>

                                </td>
                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">
                                    <strong style="padding: 5px" class="header_text">Date:</strong>
                                    <br/>
                                    <span style="padding: 5px" t-esc="doc.po_date" class="content_text"/>

                                </td>
                            </tr>
                            <!--                            <tr>-->
                            <!--                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">-->
                            <!--                                    <strong style="padding: 5px" class="header_text">Delivered Note:</strong>-->
                            <!--                                    <br/>-->
                            <!--                                    &lt;!&ndash;                                <span t-esc="doc.supplier_ref" style="padding: 5px" class="content_text"/>&ndash;&gt;-->

                            <!--                                </td>-->
                            <!--                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">-->
                            <!--                                    <strong style="padding: 5px" class="header_text"></strong>-->
                            <!--                                    <br/>-->
                            <!--                                    &lt;!&ndash;                                <span t-esc="doc.invoice_date" style="padding: 5px" class="content_text"/>&ndash;&gt;-->

                            <!--                                </td>-->
                            <!--                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">-->
                            <!--                                    <strong style="padding: 5px" class="header_text">Dispatch Doc No:</strong>-->
                            <!--                                    <br/>-->
                            <!--                                    &lt;!&ndash;                                <span t-esc="doc.dispatch_doc_no" style="padding: 5px" class="content_text"/>&ndash;&gt;-->
                            <!--                                </td>-->
                            <!--                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">-->
                            <!--                                    <strong style="padding: 5px" class="header_text">Delivery Note Date:</strong>-->
                            <!--                                    <br/>-->
                            <!--                                    &lt;!&ndash;                                <span t-esc="doc.dispatch_through" style="padding: 5px" class="content_text"/>&ndash;&gt;-->
                            <!--                                </td>-->
                            <!--                            </tr>-->
                            <tr>
                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">
                                    <strong style="padding: 5px" class="header_text">Refrence No. &amp; Date:
                                    </strong>
                                    <br/>
                                    <!--                                <span t-esc="doc.supplier_ref" style="padding: 5px" class="content_text"/>-->

                                </td>
                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">
                                    <strong style="padding: 5px" class="header_text">Other Reference:</strong>
                                    <br/>
                                    <!--                                <span t-esc="doc.invoice_date" style="padding: 5px" class="content_text"/>-->

                                </td>
                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">
                                    <strong style="padding: 5px" class="header_text">Dispatched through:</strong>
                                    <br/>
                                    <!--                                <span t-esc="doc.dispatch_doc_no" style="padding: 5px" class="content_text"/>-->
                                </td>
                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">
                                    <strong style="padding: 5px" class="header_text">Destination:</strong>
                                    <br/>
                                    <!--                                <span t-esc="doc.dispatch_through" style="padding: 5px" class="content_text"/>-->
                                </td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">
                                    <strong style="padding: 5px" class="header_text">Reverse Charge:
                                    </strong>
                                    <br/>
                                    <span style="padding: 5px" class="content_text">N</span>
                                    <!--                                                                    <span t-esc="doc.supplier_ref" style="padding: 5px" class="content_text"/>-->

                                </td>
                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">
                                    <strong style="padding: 5px" class="header_text">Transport:</strong>
                                    <br/>
                                    <t t-set="values" t-value="dict([('0','Managed by Transporter'),('1','By Road'), (False,False), ('2', 'Rail'), ('3', 'Air'), ('4','Ship')])"/>
                                    <span t-esc="values[doc.l10n_in_mode]" class="content_text" style="padding: 5px"/>
<!--                                    <span t-if="doc.l10n_in_mode" t-esc="doc.l10n_in_mode.name" style="padding: 5px"-->
<!--                                          />-->

                                </td>
                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">
                                    <strong style="padding: 5px" class="header_text">Vehicle No.:</strong>
                                    <br/>
                                    <span t-if="doc.l10n_in_vehicle_no" t-esc="doc.l10n_in_vehicle_no"
                                          style="padding: 5px" class="content_text"/>
                                </td>
                                <td style="border: 1px solid; vertical-align: text-top;" colspan="2">
                                    <strong style="padding: 5px" class="header_text">Station:</strong>
                                    <br/>
                                    <!--                                <span t-esc="doc.dispatch_through" style="padding: 5px" class="content_text"/>-->
                                </td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid;width:33.33%" colspan="2">
                                    <strong>
                                        <span style="padding: 5px" class="header_text" t-esc="doc.company_id.name"/>
                                    </strong>
                                    <br/>
                                    <span style="padding: 5px" class="content_text">
                                        <span t-esc="doc.journal_id.l10n_in_gstin_partner_id.street"/>
                                        <span t-esc="doc.journal_id.l10n_in_gstin_partner_id.street2"/>
                                        <br/>
                                        <span style="padding: 5px"
                                              t-esc="doc.journal_id.l10n_in_gstin_partner_id.city"/>
                                        <span t-esc="doc.journal_id.l10n_in_gstin_partner_id.state_id.name"/>
                                        <span t-esc="doc.journal_id.l10n_in_gstin_partner_id.zip"/>
                                    </span>
                                    <br/>
                                    <span style="padding: 5px" class="header_text">GST No:</span>
                                    <span class="content_text" t-esc="doc.journal_id.l10n_in_gstin_partner_id.vat"/>
                                    <br/>
                                    <span style="padding: 5px" class="header_text">State Name:</span>
                                    <span class="content_text"
                                          t-esc="doc.journal_id.l10n_in_gstin_partner_id.state_id.name"/>
                                </td>

                                <td style="border: 1px solid;width:33.33%;padding: 5px" colspan="3">
                                    <strong class="content_text">Buyer (Bill to)</strong>
                                    <br/>
                                    <strong>
                                        <t t-if="doc.partner_id.parent_id.name">
                                            <span t-esc="doc.partner_id.parent_id.name"
                                                  class="content_text"/>
                                        </t>
                                        <t t-else="">
                                            <span t-esc="doc.partner_id.name"
                                                  class="content_text"/>
                                        </t>
                                    </strong>
                                    <br/>
                                    <span class="content_text">
                                        <span t-esc="doc.partner_id.street"/>
                                        <span t-esc="doc.partner_id.street2"/>
                                        <br/>
                                        <span t-esc="doc.partner_id.city"/>
                                        <span t-esc="doc.partner_id.state_id.name"/>
                                        <span t-esc="doc.partner_id.zip"/>
                                    </span>
                                    <br/>

                                    <span class="header_text">
                                        <b>GST No:</b>
                                    </span>
                                    <span t-esc="doc.partner_id.vat" class="content_text"/>
                                    <br/>

                                    <span class="header_text">
                                        <b>State Name:</b>
                                    </span>
                                    <span t-esc="doc.partner_id.state_id.name" class="content_text"/>
                                </td>
                                <td style="border: 1px solid;width:33.33%;padding: 5px" colspan="3">
                                    <strong class="content_text">Buyer (Ship to)</strong>
                                    <br/>
                                    <strong>
                                        <t t-if="doc.partner_shipping_id.parent_id.name">
                                            <span t-esc="doc.partner_shipping_id.parent_id.name"
                                                  class="content_text"/>
                                        </t>
                                        <t t-else="">
                                            <span t-esc="doc.partner_shipping_id.name"
                                                  class="content_text"/>
                                        </t>
                                    </strong>
                                    <br/>
                                    <span class="content_text">
                                        <span t-esc="doc.partner_shipping_id.street"/>
                                        <span t-esc="doc.partner_shipping_id.street2"/>
                                        <br/>
                                        <span t-esc="doc.partner_shipping_id.city"/>
                                        <span t-esc="doc.partner_shipping_id.state_id.name"/>
                                        <span t-esc="doc.partner_shipping_id.zip"/>
                                    </span>
                                    <br/>

                                    <span class="header_text">
                                        <b>GST No:</b>
                                    </span>
                                    <span t-esc="doc.partner_shipping_id.vat" class="content_text"/>
                                    <br/>

                                    <span class="header_text">
                                        <b>State Name:</b>
                                    </span>
                                    <span t-esc="doc.partner_shipping_id.state_id.name" class="content_text"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="border: 1px solid;" class="header_text">
                                    Sr No.
                                </th>
                                <th style="border: 1px solid;" class="header_text">
                                    Description Of Service
                                </th>
                                <!--                            <td style="border: 1px solid" class="text-center" colspan="2">-->
                                <!--                                <strong style=" padding: 5px" class="header_text">Product</strong>-->
                                <!--                            </td>-->
                                <th style="border: 1px solid;" class="header_text">
                                    HSN/SAC
                                </th>
                                <!--                            <td style="border: 1px solid" class="text-center">-->
                                <!--                                <strong style=" padding: 5px" class="header_text">Product</strong>-->
                                <!--                            </td>-->
                                <th style="border: 1px solid;" class="header_text">
                                    GST Rate
                                </th>
                                <th style="border: 1px solid;" class="header_text">
                                    Quantity
                                </th>
                                <th style="border: 1px solid" class="header_text">
                                    Unit Price
                                </th>
                                <th style="border: 1px solid" class="header_text">
                                    Tax amt
                                </th>
                                <th style="border: 1px solid;" class="header_text">
                                    Total
                                </th>

                            </tr>
                            <t t-set="sq_no" t-value="1"/>
                            <t t-set="gst_inc_price" t-value="0"/>
                            <t t-set="total" t-value="0"/>
                            <t t-set="subtotal_igst" t-value="0.0"/>
                            <t t-foreach="doc.invoice_line_ids" t-as="line">
                                <tr>
                                    <td style="border: 1px solid" class="text-center">
                                        <center>
                                            <t t-if="line.product_id.name">
                                                <span t-esc="sq_no" class="content_text"/>
                                                <t t-set="sq_no" t-value="sq_no+1"/>
                                            </t>
                                        </center>
                                    </td>
                                    <td style="border: 1px solid" class="text-center">
                                        <center>
                                            <span t-esc="line.product_id.name" class="content_text"/>
                                        </center>
                                    </td>

                                    <td style="border: 1px solid" class="text-center">
                                        <center>
                                            <span t-esc="line.hsn_code" class="content_text"/>
                                        </center>
                                    </td>
                                    <td style="vertical-align: top;border: 1px solid" name="td_gst" class="text-center">
                                        <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))"
                                              id="line_tax_ids"/>
                                        <!--                                        <t t-if="line.tax_ids">-->
                                        <!--                                            <t t-foreach="line.tax_ids" t-as="t">-->
                                        <!--                                                <t t-if="t.children_tax_ids">-->
                                        <!--                                                    <t t-set="counter" t-value="0"/>-->
                                        <!--                                                    <t t-foreach="t.children_tax_ids" t-as="l">-->
                                        <!--                                                        <t t-if="counter &gt;= 1">-->
                                        <!--                                                            <span> + </span>-->
                                        <!--                                                        </t>-->
                                        <!--                                                        <span t-esc="l.name.split('-')[0]"/>-->
                                        <!--                                                        <t t-set="counter" t-value="counter+1"/>-->
                                        <!--                                                    </t>-->
                                        <!--                                                </t>-->
                                        <!--                                                <t t-else="">-->
                                        <!--                                                    <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))" id="line_tax_ids"/>-->
                                        <!--                                                </t>-->

                                        <!--                                            </t>-->
                                        <!--                                        </t>-->


                                    </td>

                                    <td style="border: 1px solid" class="text-center">
                                        <center>
                                            <span t-esc="line.quantity" class="content_text"/>
                                        </center>
                                    </td>
                                    <td style="border: 1px solid" class="text-center">
                                        <span t-esc="line.price_unit" class="content_text"/>
                                    </td>

                                    <td style="border: 1px solid" class="text-center">
                                        <center>
                                            <t t-set="cgst" t-value="0"/>
                                            <t t-set="sgst" t-value="0"/>
                                            <t t-set="igst" t-value="0"/>
                                            <t t-foreach="line.tax_ids" t-as="t">
                                                <t t-foreach="t.children_tax_ids" t-as="l">
                                                    <t t-if="'CGST' == l.name[:4]">
                                                        <span style="vertical-align:center; font-size:13px">
                                                            <t t-set="subtotal"
                                                               t-value="((l.amount * line.price_subtotal)/100)"/>
                                                            <t t-set="cgst" t-value="cgst + subtotal"/>
                                                        </span>
                                                    </t>
                                                    <t t-if="'SGST' == l.name[:4]">
                                                        <span style="vertical-align:center; font-size:13px">
                                                            <t t-set="subtotal"
                                                               t-value="((l.amount * line.price_subtotal)/100)"/>
                                                            <t t-set="sgst" t-value="sgst + subtotal"/>
                                                        </span>
                                                    </t>
                                                </t>
                                            </t>

                                            <!-- this is for igst part -->

                                            <t t-foreach="line.tax_ids" t-as="t">
                                                <t t-if="'IGST' == t.name[:4]">
                                                    <span style="vertical-align:center; font-size:13px">
                                                        <t t-set="subtotal_igst"
                                                           t-value="((t.amount * line.price_subtotal)/100)"/>
                                                        <t t-set="igst" t-value="igst + subtotal_igst"/>
                                                    </span>
                                                </t>
                                            </t>

                                            <t t-set="gst_inc_price" t-value="cgst + sgst + igst"/>
                                            <span t-esc="gst_inc_price"
                                                  t-options='{"widget": "float", "precision": 2}'
                                                  class="content_text"/>
                                        </center>
                                    </td>

                                    <td style="border: 1px solid" class="text-center">
                                        <center>
                                            <t t-set="cgst" t-value="0"/>
                                            <t t-set="sgst" t-value="0"/>
                                            <t t-set="igst" t-value="0"/>
                                            <t t-foreach="line.tax_ids" t-as="t">
                                                <t t-foreach="t.children_tax_ids" t-as="l">
                                                    <t t-if="'CGST' == l.name[:4]">
                                                        <span style="vertical-align:center; font-size:13px">
                                                            <t t-set="subtotal"
                                                               t-value="((l.amount * line.price_subtotal)/100)"/>
                                                            <t t-set="cgst" t-value="cgst + subtotal"/>
                                                        </span>
                                                    </t>
                                                    <t t-if="'SGST' == l.name[:4]">
                                                        <span style="vertical-align:center; font-size:13px">
                                                            <t t-set="subtotal"
                                                               t-value="((l.amount * line.price_subtotal)/100)"/>
                                                            <t t-set="sgst" t-value="sgst + subtotal"/>
                                                        </span>
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-foreach="line.tax_ids" t-as="t">
                                                <t t-if="'IGST' == t.name[:4]">
                                                    <span style="vertical-align:center; font-size:13px">
                                                        <t t-set="subtotal_igst"
                                                           t-value="((t.amount * line.price_subtotal)/100)"/>
                                                        <t t-set="igst" t-value="igst + subtotal_igst"/>
                                                    </span>
                                                </t>
                                            </t>

                                            <t t-set="gst_inc_price" t-value="cgst + sgst + igst"/>
                                            <span t-esc="(gst_inc_price + line.price_subtotal)" class="content_text"
                                                  t-options='{"widget": "float", "precision": 2}'/>
                                            <t t-set="total"
                                               t-value="total + (gst_inc_price + line.price_subtotal)"/>
                                        </center>
                                    </td>
                                </tr>
                                <!--                                For Notes and Section-->
                                <t t-if="line.display_type == 'line_section'">
                                    <td colspan="99">
                                        <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                    </td>
                                    <t t-set="current_section" t-value="line"/>
                                    <t t-set="current_subtotal" t-value="0"/>
                                </t>
                                <t t-if="line.display_type == 'line_note'">
                                    <td colspan="99">
                                        <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                    </td>
                                </t>
                            </t>

                        </table>
                        <div class="clearfix mb-4 mt-4">
                            <div id="total" class="row">
                                <div class="col">
<!--                                    <table style="width:100%">-->
<!--                                        <thread>-->
<!--                                            <tr>-->
<!--                                                <td>-->
<!--                                                    <strong style="padding:5px">Bank Name:</strong>-->
<!--                                                    <span t-esc="doc.partner_bank_id.bank_id.name" class="content_text" style="padding: 5px"/><br/>-->
<!--                                                    <strong style="padding:5px">Account Holder:</strong>-->
<!--                                                    <span t-esc="doc.partner_bank_id.partner_id.name" class="content_text" style="padding: 5px"/><br/>-->
<!--                                                    <strong style="padding:5px">Account Number:</strong>-->
<!--                                                    <span t-esc="doc.partner_bank_id.acc_number" class="content_text" style="padding: 5px"/><br/>-->
<!--                                                    <strong style="padding:5px">Branch:</strong>-->
<!--                                                    <span t-esc="doc.partner_bank_id.bank_id.street" class="content_text" style="padding: 5px"/><br/>-->
<!--                                                    <strong style="padding:5px">IFSC Code:</strong>-->
<!--                                                    <span t-esc="doc.partner_bank_id.bank_id.bic" class="content_text" style="padding: 5px"/>-->
<!--                                                </td>-->
<!--                                                <td>-->
                                                    <table style="page-break-inside: avoid; width:38%; float:right;">

                                                <!-- Tax totals -->
                                                <t t-set="tax_totals" t-value="doc.tax_totals"/>
                                                <t t-call="account.document_tax_totals"/>
                                                </table>


<!--                                                </td>-->
<!--                                            </tr>-->
<!--                                        </thread>-->
<!--                                    </table>-->

                                </div>
                            </div>
                        </div>

                        <table style="width: 100%; border-collapse: collapse">
                            <tr>
                                <td class="content_text" colspan="12" style="border: 1px solid">
                                    <span style=" padding: 5px" class="header_text">Amount Chargeable (in words) :
                                    </span>
                                    <t t-if="doc.currency_id.name == 'INR'">
                                        <!--                                        <strong class="content_text" style="text-transform: capitalize;"-->
                                        <!--                                                t-esc="doc.amt.replace(',', '')"/> -->
                                        <strong class="content_text" style="text-transform: capitalize;"
                                                t-esc="doc.convert_num_to_text(doc.amount_total_signed)"/>
                                        <!--                                        <strong class="content_text">Paise only</strong>-->
                                    </t>
                                    <t t-else="">
                                        <strong class="content_text"
                                                t-esc="doc.currency_id.amount_to_text(doc.amount_total).replace(',', '')"/>
                                        <strong class="content_text">only</strong>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <th style="border: 1px solid" rowspan="2">
                                    <strong style=" padding: 2px" class="header_text">Sr. No</strong>
                                </th>
                                <th style="border: 1px solid" rowspan="2" colspan="3">
                                    <strong style=" padding: 2px" class="header_text">HSN/SAC</strong>
                                </th>
                                <th style="border: 1px solid" rowspan="2">
                                    <strong style=" padding: 2px" class="header_text">Taxable Value</strong>
                                </th>
                                <th colspan="2" style="border: 1px solid">
                                    <strong style=" padding: 2px" class="header_text">Central Tax</strong>
                                </th>
                                <th colspan="2" style="border: 1px solid">
                                    <strong style=" padding: 2px" class="header_text">State Tax</strong>
                                </th>
                                <th colspan="2" style="border: 1px solid">
                                    <strong style=" padding: 2px" class="header_text">IGST Tax</strong>
                                </th>
                                <th style="border: 1px solid" rowspan="2">
                                    <strong style=" padding: 2px" class="header_text">Total Tax Amt</strong>
                                </th>
                            </tr>
                            <tr>
                                <!--                            CGST -->
                                <th style="border: 1px solid">
                                    <strong style=" padding: 5px" class="header_text">Rate</strong>
                                </th>
                                <th style="border: 1px solid">
                                    <strong style=" padding: 5px" class="header_text">Amount</strong>
                                </th>
                                <!--                            SGST -->
                                <th style="border: 1px solid">
                                    <strong style=" padding: 5px" class="header_text">Rate</strong>
                                </th>
                                <th style="border: 1px solid">
                                    <strong style=" padding: 5px" class="header_text">Amount</strong>
                                </th>
                                <!--                            IGST -->
                                <th style="border: 1px solid">
                                    <strong style=" padding: 5px" class="header_text">Rate</strong>
                                </th>
                                <th style="border: 1px solid">
                                    <strong style=" padding: 5px" class="header_text">Amount</strong>
                                </th>
                            </tr>

                            <!--                        this is for second table HSN code and gst charges -->
                            <t t-set="sq_no" t-value="1"/>
                            <t t-set="total_cgst" t-value="0"/>
                            <t t-set="total_sgst" t-value="0"/>
                            <t t-set="total_igst" t-value="0"/>
                            <t t-set="total_amount_taxable" t-value="0"/>
                            <t t-set="total_amount" t-value="0"/>
                            <t t-set="igst" t-value="0"/>
                            <t t-set="hsn_summary" t-value="doc.cal_hsn_summary()"/>
                            <t t-foreach="hsn_summary" t-as="line">
                                <tr>
                                    <td style="border: 1px solid" class="center_text">
                                        <t t-if="line">
                                            <span t-esc="sq_no" class="content_text"/>
                                            <t t-set="sq_no" t-value="sq_no+1"/>
                                        </t>
                                    </td>
                                    <td style="border: 1px solid" class="center_text" colspan="3">
                                        <span t-esc="line['hsn_code']" class="content_text"/>
                                    </td>
                                    <td style="border: 1px solid" class="center_text">
                                        <span t-esc="line['taxable_value']" class="content_text"
                                              t-options='{"widget": "float", "precision": 2}'/>
                                        <t t-set="total_amount_taxable"
                                           t-value="total_amount_taxable + line['taxable_value']"/>
                                    </td>

                                    <!--   CGST (%) -->
                                    <td style="border: 1px solid" class="center_text">
                                        <span t-esc="line['cgst_percent']" class="content_text"/>
                                    </td>
                                    <!--   CGST (Amount) -->
                                    <td style="border: 1px solid" class="center_text">
                                        <span t-esc="line['cgst_amt']" class="content_text"
                                              t-options='{"widget": "float", "precision": 2}'/>
                                        <t t-set="total_cgst" t-value="total_cgst + line['cgst_amt']"/>
                                    </td>
                                    <!--   SGST (%) -->
                                    <td style="border: 1px solid" class="center_text">
                                        <span t-esc="line['sgst_percent']" class="content_text"/>
                                    </td>
                                    <!--   SGST (Amount) -->
                                    <td style="border: 1px solid;" class="center_text">
                                        <span t-esc="line['sgst_amt']" class="content_text"
                                              t-options='{"widget": "float", "precision": 2}'/>
                                        <t t-set="total_sgst" t-value="total_sgst + line['sgst_amt']"/>
                                    </td>

                                    <td style="border: 1px solid" class="center_text">
                                        <span t-esc="line['igst_percent']" class="content_text"/>
                                    </td>
                                    <td style="border: 1px solid;" class="center_text">
                                        <span t-esc="line['igst_amt']" class="content_text"
                                              t-options='{"widget": "float", "precision": 2}'/>
                                        <t t-set="total_igst" t-value="total_igst + line['igst_amt']"/>
                                    </td>

                                    <td style="border: 1px solid" class="center_text">
                                        <span t-esc="line['tax_amt']" class="content_text"
                                              t-options='{"widget": "float", "precision": 2}'/>
                                        <t t-set="total_amount" t-value="total_amount + line['tax_amt']"/>
                                    </td>
                                </tr>
                            </t>
                            <tr>
                                <td colspan="4" style="border: 1px solid" class="text-right">
                                    <strong style=" padding: 5px" class="header_text">Total</strong>
                                </td>
                                <td style="border: 1px solid" class="center_text">
                                    <span t-esc="total_amount_taxable" class="content_text"
                                          t-options='{"widget": "float", "precision": 2}'/>
                                </td>
                                <td style="border: 1px solid"></td>
                                <td style="border: 1px solid" class="center_text">
                                    <span t-esc="total_cgst" class="content_text"
                                          t-options='{"widget": "float", "precision": 2}'/>
                                </td>
                                <td style="border: 1px solid"></td>
                                <td style="border: 1px solid" class="center_text">
                                    <span t-esc="total_sgst" class="content_text"
                                          t-options='{"widget": "float", "precision": 2}'/>
                                </td>

                                <!--                            igst-->
                                <td style="border: 1px solid"></td>
                                <td style="border: 1px solid" class="center_text">
                                    <span t-esc="total_igst" class="content_text"
                                          t-options='{"widget": "float", "precision": 2}'/>
                                </td>

                                <td style="border: 1px solid" class="center_text">
                                    <span t-esc="total_amount" class="content_text"
                                          t-options='{"widget": "float", "precision": 2}'/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="12" style="border-left: 1px solid;border-right: 1px solid;">
                                    <strong style=" padding: 5px" class="header_text">Tax Amount (In Words) :</strong>
                                    <!--                                    <strong class="content_text" style="text-transform: capitalize;"-->
                                    <!--                                            t-esc="doc.tot_amt_in_words(round(total_amount, 2))"/> &#160; <b>only</b>-->
                                    <strong class="content_text" style="text-transform: capitalize;"
                                            t-esc="doc.convert_num_to_text(round(total_amount, 2))"/>
                                    <br/>
                                    <strong style=" padding: 5px" class="header_text">
                                        Narration:
                                    </strong>
                                    <br/>
                                    <strong style=" padding: 5px">
                                        <span t-esc="doc.narration" class="content_text"/>
                                    </strong>
                                    <br/>

                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" style="border:1px solid;border-top: none;vertical-align: text-top;">
                                    <strong style="padding: 5px" class="header_text">
                                        <u>
                                            Declaration
                                        </u>
                                        <br/>
                                        <a style="padding: 5px">
                                            We declare that this invoice shows the actual price of the goods/services
                                            described
                                            and
                                            that
                                            all particulars are true and correct.
                                            <br/>
                                            Reverse Charge Mechanism - No
                                        </a>
                                    </strong>
                                </td>
                                <td colspan="6" style="border:1px solid">
                                    <b>From
                                        <span t-field="doc.company_id.name"/>
                                    </b>
                                    <br/>
                                    <br/>
                                    <br/>
                                    <br/>
                                    Authorised Signatory
                                </td>
                            </tr>

                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>


    <template id="external_layout_stripped_invoice">
        <div t-attf-class="header o_company_#{company.id}_layout">
            <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)"
                 style="height: 60px;width: 220px;margin-top: 13px" alt="Logo"/>
        </div>
        <div t-attf-class="article o_report_layout_striped o_company_#{company.id}_layout"
             t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id"
             t-att-data-oe-lang="o and o.env.context.get('lang')">
            <t t-raw="0"/>
        </div>
    </template>
    <template id="css_invoice_report_header">
        <t t-if="not o" t-set="o" t-value="doc"/>
        <t t-if="not company">
            <!--  Multicompany  -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>
        <t t-call="csspl_india.external_layout_stripped_invoice">
            <t t-raw="0"/>
        </t>
    </template>

</odoo>