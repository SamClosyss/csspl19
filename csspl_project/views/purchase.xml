<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <!-- Inherited Purchase Order form view -->
    <record id="inherited_purchase_order_form" model="ir.ui.view">
        <field name="name">inherited_purchase_order_form</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form"/>
        <field name="arch" type="xml">

            <!-- Header -->
            <xpath expr="//header" position="inside">
                <button name="action_view_project_materials"
                        string="Fetch Materials"
                        type="object"
                        class="btn btn-primary"
                        invisible="state not in ('draft','sent')"/>
            </xpath>

            <!-- Order Lines -->
            <xpath expr="//field[@name='order_line']/list/field[@name='product_id']" position="after">
                <field name="task_id"
                       options="{'no_create': True, 'no_edit_open': True, 'no_open': True}"
                       readonly="parent.state not in ('draft','sent')"/>
                <field name="boq_line_id" invisible="True"/>
            </xpath>

            <!-- Replace taxes -->
            <xpath expr="//field[@name='order_line']/list/field[@name='tax_ids']" position="replace">
                <field name="tax_ids"
                       widget="many2many_tags"
                       domain="[('type_tax_use', '=', 'purchase')]"
                       options="{'no_create': True}"/>
                <!--                <field name="journal_relate_id" invisible="True"/>-->
            </xpath>
            <!--            <field name="tax_ids"-->
            <!--                   widget="many2many_tags"-->
            <!--                   domain="[('journal_ids', '=', journal_relate_id), ('type_tax_use', '=', 'purchase')]"-->
            <!--                   options="{'no_create': True}"/>-->
            <!--            <field name="journal_relate_id" invisible="True"/>-->
            <!-- After is_checked -->
            <xpath expr="//field[@name='picking_type_id']" position="after">
                <field name="analytic_distribution"
                       readonly="state not in ('draft','sent')"/>

<!--                <field name="gstin_id"-->
<!--                       domain="[('is_gstin', '=', True)]"-->
<!--                       readonly="state == 'purchase'"-->
<!--                       required="True"/>-->

<!--                <field name="l10n_in_journal_id"-->
<!--                       options="{'no_create': True}"-->
<!--                       domain="[('company_id', '=', company_id), ('type', '=', 'purchase')]"-->
<!--                       invisible="country_code != 'IN'"-->
<!--                       required="country_code == 'IN'"/>-->
            </xpath>

        </field>
    </record>


    <!-- Partner Form -->
    <record model="ir.ui.view" id="inherited_partner_form_view">
        <field name="name">inherited_partner_form_view</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='vat']" position="after">
                <field name="cust_partner_type"/>
                <field name="restrict_partner_ledger" invisible="True"/>
            </xpath>

            <!--            <xpath expr="//button[@id='partner_ledger_button']" position="attributes">-->
            <!--                <attribute name="invisible">-->
            <!--                    restrict_partner_ledger == True-->
            <!--                </attribute>-->
            <!--            </xpath>-->

        </field>
    </record>

</odoo>
